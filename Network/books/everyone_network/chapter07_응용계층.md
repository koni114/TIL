# chpater07 응용계층 : 애플리케이션에 데이터 전송하기
- 애플리케이션은 서비스를 요청하는 측에서 사용하는 애플리케이션으로 분류하거나, 서비스를 제공하는 측의 애플리케이션으로 분류할 수 있음
- <b>일반적으로 서비스를 요청하는 측을 클라이언트, 서비스를 제공하는 측을 서버라고 함</b>
- 예를 들어 웹 브라우저나 메일 프로그램은 사용자 측에서 사용하는 애플리케이션이니 클라이언트가 되고, 서비스를 제공하는 측인 서버에는 웹 서버 프로그램이나 메일 서버 프로그램 등이 있음
- 이러한 애플리케이션은 <b>응용 계층</b>에서 동작함
- 여기서 말하는 응용계층은 OSI 7계층에서 응용 계층, 표현 계층, 세션 계층을 포함하는 것으로 생각
- 즉, <b>응용 계층은 애플리케이션과 데이터를 주고받기 위해 필요한 계층</b>
- 응용 계층에서는 클라이언트의 요청을 전달하기 위해 통신 대상이 이해할 수 있는 메세지로 변환하고 전송 계층으로 전달하는 역할을 함
- 아래 그림과 같이 클라이언트 측 애플리케이션이 서버측 애플리케이션과 통신하려면 응용 계층의 프로토콜을 사용해야 함
![img](https://github.com/koni114/Network/blob/master/img/network_43.JPG)
- 아래 표와 같이 웹 사이트를 볼 때는 <b>HTTP</b>, 파일을 전송할 때는 <b>FTP</b>, 메일을 보낼때는 <b>SMTP</b>, 메일을 받을 때는 <b>POP3</b>라는 프로토콜을 사용
- 컴퓨터나 장비에 붙여진 이름을 기반으로 IP 주소를 알아내는 것을 name resolution이라고 하는데, 이를 위해 <b>DNS</b>를 사용
![img](https://github.com/koni114/Network/blob/master/img/network_44.JPG)
- 응용 계층에서의 다른 프로토콜도 존재함
- 응용 계층은 각각의 애플리케이션에서 대응되는 데이터를 전송하는 역할을 하고, 응용 계층에서 보내려는 데이터는 하위 계층인 전송 계층, 네트워크 계층, 데이터 링크 계층, 물리 계층 순서로 처리됨. 아래 그림에서 잘 정리되어 있음
![img](https://github.com/koni114/Network/blob/master/img/network_45.JPG)

## WWW란?
- 웹사이트와 웹 서버의 구조에 대해서 알아보자
- 인터넷의 핵심적인 역할을 수행하는 WWW는 줄여서 W3나 웹(Web)이라고도 부름
- WWW는 HTML, URL, HTTP라는 세 가지 기술이 사용
- HTML은 웹 페이지에서 문장 구조나 문자를 꾸미는 태그를 사용하여 작성하는 마크업 언어  
  제목이나 목록과 같은 문장 구조를 지정하거나 이미지 파일을 보여 줄 때도 태그 사용
- 또한 HTML은 하이퍼텍스트를 작성하는 마크업 언어라고도 함. 하이퍼텍스트로는 문자와 이미지를 표시하거나 하이퍼링크(hyperlink)를 사용할 수도 있음
- 하이퍼링크는 보통 링크라고 부르는데 웹 사이트에서 아이콘이나 버튼 등에 있는 링크를 클릭하면 다른 사이트로 이동 가능   
![img](https://github.com/koni114/Network/blob/master/img/network_46.JPG)

## HTTP란?
- 클라이언트는 웹 사이트를 보기 위해 서버의 80번 포트를 이용해서 HTTP 통신을 함. 아래 그림과 같이 클라이언트에서 HTTP 요청(response)를 보내고 서버에서 HTTP 응답을 반환함
![img](https://github.com/koni114/Network/blob/master/img/network_47.JPG)
- 클라이언트가 데이터를 요청할 때는 "GET"이라고 하는 요청 정보, 파일 이름, 버전 등을 서버에 전송함. 그러면 서버는 응답으로 요청을 정상적으로 처리했다는 "OK"정보를 반환하고 index.html을 클라이언트에게 보냄
- HTTP/1.0 버전에서는(old) 요청을 보낼 때마다 연결했다 끊는 작업을 반복했음  
  ex) 연결 수립 -> 요청 -> 응답 -> 연결 끊기 -> 연결 수립 -> 요청 -> 응답...
- HTTP/1.1 버전에서는 <b>keepalive</b>라는 기능이 추가됨
- keepalive는 연결을 한 번 수립하면 데이터 교환을 마칠 때까지 유지하고, 데이터 교환을 끝내면 연결을 끊는 구조임. 요청도 순서대로 처리하는 특징이 있음
- HTTP/2.0 버전은 1.1에서 이전 요청이 늦어지면 전체적인 지연 현상을 개선하고자 요청을 순서대로 반환하는 것이 아닌 바로 반환하는 형식이 적용됨

## 도메인 이름이란? 
- DNS는 URL을 IP 주소로 변환하는 서비스임
- http://www.google.com에 접속하면 DNS서버가 웹 사이트 서버의 IP를 알려줌  
  이를 name resolution이라고 함
- 컴퓨터와 네트워크를 식별하기 위하여 붙여진 이름을 도메인 이름이라고 하고, 도메인 이름 앞에 있는 www는 호스트 이름(서버 이름)이라고 함
- 다음은 컴퓨터와 DNS 서버의 통신 흐름을 보여줌
![img](https://github.com/koni114/Network/blob/master/img/network_48.JPG)
- 요청한 첫 번째 DNS 서버가 도메인의 IP주소를 모르는 경우도 있음  
  그런 경우에는 DNS 서버 1이 DNS 서버 2에 요청함
- DNS서버는 전세계에 흩어져 있고 모두 계층적으로 연결되어 있음

## 메일의 송수신 구조
- 메일을 송수신하려면 클라이언트 측의 메일 프로그램과 서버 측의 메일 서버 프로그램 간의 통신을 해야함
- 그때 사용되는 프로토콜은 크게 2가지인데, 메일을 보낼 때는 SMTP, 받을때는 POP3가 사용됨. SMTP는 포트 번호로 25번, POP3은 110번을 사용
- SMTP는 메일 서버 간의 메일 전송에도 이용됨
- 다음은 일반적인 메일 송수신의 프로세스임
![img](https://github.com/koni114/Network/blob/master/img/network_49.JPG)
- 위의 그림에서 회색에 둘러쌓인 부분부터 살펴보면, 컴퓨터 1의 사용자는 메일 서버 1을 사용하는데, 메일 서비스를 제공하는 포털사이트나 회사의 메일 서버를 사용하는 경우가 많음
- 포텉사이트에 가입하거나 회사에서 메일 주소를 받으면 메일 서버를 사용할 수 있게 됨
- 그래서 메일을 보낼 때는 메일 서비스를 제공하는 포털 사이트나 회사 메일 서버에 메일을 보냄
- 메일 서버를 사용하는 방법은 컴퓨터 1에서 사용하는 메일 프로그램에 메일 서비스를 제공하는 메일 서버의 호스트 이름을 설정하면 됨
- 다음은 컴퓨터와 메일 서버 간에 일어나는 메일 교환임 
![img](https://github.com/koni114/Network/blob/master/img/network_50.JPG)

## POP3에 의한 메일 수신
- 메일 서버에는 메일 박스라고 하는 메일을 보관해주는 기능이 있음
- 서버 2는 POP3을 이용하여 메일 서버 2의 메일박스에서 메일을 가져와서 컴퓨터 2로 전송함
- 메일 수신시 사용자 이름과 비밀번호를 이용한 시용자 인증이 필요하니 주의
- 메일 수신은 POP3 110번 포트를 사용함
![img](https://github.com/koni114/Network/blob/master/img/network_51.JPG)


## 용어 정리
- WWW
  - World Wide Web의 줄임말
- HTML
  - HyperText Markup Language(하이퍼텍스트 마크업 언어)의 약어
- URL
  - Uniform Resouce Locator의 약어
- 마크업 언어
  - 문장의 일부를 태그로 감싸고 문장을 꾸미기 위한 형식       