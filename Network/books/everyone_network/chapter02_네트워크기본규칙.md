# chapter02 네트워크 기본 규칙
## 프로토콜(protocol)이란?
- 네트워크에서도 문제없이 통신하려면 규칙(약속)을 지켜야 함
- 네트워크 통신을 하기 위한 규칙을 프로토콜이라고 함
- 불어를 못하는 한국인과 한국어를 못하는 프랑스인이라면 영어로 대화한다는 규칙을 정해 대화 가능
- 편지를 배송하기 위해서는 편지를 쓸 때부터 상대방에게 도착할 때까지 지켜야 하는 독립적인 여러 규칙을 거쳐야 함

## OSI 모델이란?
- 표준 규격을 정하는 단체 중에 ISO라는 국제표준화기구가 있는데, 이 단체는 OSI 모델이라는 표준 규격을 제정함
- OSI 모델은 네트워크 기술의 기본이 되는 모델
- 데이터의 송수신은 컴퓨터에서 컴퓨터로 데이터를 전송하는 것. 이 때 컴퓨터 내부에서는 여러 가지 일을 하는데, 이런 일을 일곱 개 계층으로 나눠서 함
- 일곱 개 계층이 아래 그림과 같은 OSI 모델. 계층이라는 용어 대신에 레이어라는 용어를 사용하기도 함
![img](https://github.com/koni114/Network/blob/master/img/network_03.JPG)

- 통신할 때는 맨 위의 응용 계층에서 순차적으로 아래 계층으로 전달 됨
- 각 계층의 역할은 다음과 같음
  - 응용 계층(Application Layer)
    - 이메일 & 파일 전송, 웹 사이트 조회 등 애플리케이션에 대한 서비스 제공
  - 표현 계층(Presentation Layer)
    - 문자 코드, 압축, 암호화 등의 데이터 변환
  - 세션 계층(Session Layer) 
    - 세션 체결. 통신 방식을 결정
  - 전송 계층(Transport Layer)  
    - 신뢰할 수 있는 통신 구현
  - 네트워크 계층(Network Layer)
    - 다른 네트워크와 통신하기 위한 경로 설정 및 논리 주소를 결정
  - 데이터 링크 계층(Data Link Layer)
    - 네트워크 기기 간의 데이터 전송 및 물리 주소를 결정
  - 물리 계층(Physical Layer)
    - 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어
- 데이터를 송신하는 측은 상위 계층에서 하위 계층으로 데이터를 전달  
  이 때 각 계층은 독립적으로 데이터가 전달되는 동안에 다른 계층의 영향을 받지 않음
- 데이터를 수신하는 측은 하위 계층에서 상위 계층으로 각 계층을 통해 전달된 데이터를 받음 

## TCP/IP 모델이란?
- 지금까지는 OSI 모델에 대해서 설명했지만, 7계층을 4계층으로 바꿔서 생각하면 더 쉬운데, 이 때 이 4계층 모델을 TCP/IP 모델이라고 함
- TCP/IP 모델은 다음과 같이 4계층으로 되어 있음
![img](https://github.com/koni114/Network/blob/master/img/network_04.JPG)

- OSI 모델의 응용 계층, 표현 계층, 세션 계층은 TCP/IP 모델에서는 응용 계층으로 합쳐져 있음
- 각 계층에는 다양한 프로토콜이 있음  

## 캡슐화와 역캡슐화란? 
- 예를 들어 컴퓨터 A에서 컴퓨터 B로 데이터를 전송한다고 생각해보자
- 데이터를 보내려면 데이터의 앞부분에 전송하는 데 필요한 정보를 붙여서 다음 계층으로 보내야 하는데, 이 정보를 <b>헤더</b>라고 하는데 헤더에는 데이터를 전달받을 상대방에 대한 정보도 포함되어 있음
- [필요한 정보] -> [송신 데이터] -> [필요한 정보(헤더) | 송신 데이터] 
- 이처럼 헤더를 붙여 나가는 것을 <b>캡슐화</b>라고 함. 데이터를 받는 쪽에서는 헤더를 하나씩 제거해야 함. 이것을 <b>역캡슐화</b>라고 함 
- 다음은 캡슐화와 역캡슐화의 전체적인 흐름을 보여줌
![img](https://github.com/koni114/Network/blob/master/img/network_05.JPG)
- 송신 측 컴퓨터에서 웹 사이트에 집속하려고 하면 그림 2-9의 응용 계층에서는 웹 사이트를 접속하기 위한 요청 데이터가 만들어짐
- 해당 데이터는 전송 계층에 전달되는데, 전송 계층에서 신뢰할 수 있는 통신이 이루어지도록 응용 계층에서 만들어진 데이터에 헤더를 붙임
- 네트워크 계층과 데이터링크 계층도 마찬가지로 헤더를 붙이고, 데이터 링크 계층에서는 트레일러를 붙임
- 트레일러는 데이터를 전달할 때 마지막에 추가하는 정보를 말함
- 이렇게 데이터 링크 계층에서 만들어진 데이터는 최종적으로 전기 신호로 변환돼서 수신 측에 도착
- 수신 측은 데이터링크 계층부터 순서대로 상위 계층으로 전달하고 있음
- 이렇게 네트워크는 데이터를 전달하기 위한 여러가지 규칙이 있어 데이터를 문제없이 전달 가능

## 용어 정리
- VPN(Virtual Private Network)
  - 가상 통신 터널을 만들어 기업 본사나 지사와 같은 거점 간을 연결하여 통신하거나 외부에서 인터넷으로 사내에 접속하는 것을 말함 
  - VPN은 다음 두 종류로 구성
  - 인터넷 VPN
    - 인터넷 VPN에는 거점 간 접속과 원격 접속 연결이 있음. 둘다 인터넷 망을 사용 
    - 거점 간 접속은 IPsec이라는 암호 기술 프로토콜을 사용하여 접속
    - 원격 접속 연결은 외부에서 사용하는 컴퓨터와 사내 네트워크를 연결하기 때문에 암호화된 통신로를 만듬
  - IP-VPN
    - MPLS라는 기술을 사용하여 인터넷망이 아닌 통신 사업자 전용 폐쇄망을 사용
    - MPLS는 폐쇄망을 사용하기 떄문에 제3자에 의한 해킹이나 데이터 변조의 위험이 없어 암호화 기능이 필요하지 않음
- 프로토콜(protocol)
  - 컴퓨터 간의 정보를 주고 받을 때의 통신 방법에 대한 규칙이나 표준
- OSI 모델
  - 국제표준화기구(ISO)가 1977년에 정의한 국제 통신 표준 규약임  
  - 네트워크의 기본 구조를 7개의 계층으로 나눠서 표준화한 통신 규약
- TCP/IP 모델
  - OSI 모델 7계층의 네트워크에서 데이터를 전송하는 과정을 네 개 계층으로 단순화시켜 사용하는 모델. 인터넷 모델이라고도 함
- 캡슐화/역캡슐화
  - 캡슐화는 상위 계층의 통신 프로토콜 정보에 헤더를 붙여 하위 계층으로 전송하는 기술
  - 역캡슐화는 상위 계층의 통신 프로토콜에서 하위 계층에서 추가한 정보와 데이터를 분리하는 기술