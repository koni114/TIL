# 컨테이너에서 태스크 실행하기
- 다양한 오퍼레이터를 사용할 때의 문제점을 다룹니다.
- 이러한 문제점을 고려하여 도커 및 쿠버네티스를 사용하여 컨테이너에서 Airflow 태스크를 실행하는 방법과 컨테이너 접근 방식이 가져올 수 있는 몇가지 이점에 대해서 알아봄

## 다양한 오퍼레이터를 쓸 때 고려해야 할 점
- 여러 오퍼레이터를 사용하면 DAG가 복잡해지기 때문에 만들고 관리하는 것이 어려워짐
- 예를 들어 다음과 같이 3단계의 태스크로 구성되어 있다고 할 때, 각 태스크의 오퍼레이터가 다르게 사용되기 때문에 관리가 어려워짐

![img](https://github.com/koni114/TIL/blob/master/Data-Engineering/contents/apache-airflow/img/airflow_35.png)

### 오퍼레이터 인터페이스 및 구현하기
- 각 태스크마다 다른 오퍼레이터를 구성할 때 어려운 점은 <b>각 오퍼레이터별로 인터페이스와 내부 동작에 익숙해져야 한다는 점</b>
- 오퍼레이터에서 버그가 발생하면, 근본적인 문제를 추적하고 수정하는 데 귀중한 시간과 리소스를 투자해야 함

### 복잡하며 종속성이 충돌하는 환경
- 다양한 오퍼레이터를 사용할 때 어려운 점은 오퍼레이터마다 각각의 dependency 를 요구한다는 점
- 예를 들어 위의 예시에서 HTTPOperator 는 `request` 패키지에 종속성을 가지고 있으며, MySQLOperator 는 MySQL과 통신하기 위해 파이썬 및 시스템 레벨에서 종속성을 가지게 됨
- Airflow 설정 방식 때문에 <b>이러한 모든 종속성을 Airflow 스케줄러, 워커에서 설치해야 함</b>
- 다양한 오퍼레이터 사용시, 다양한 dependency 를 위한 많은 패키지(모듈)이 설치되어야 하므로, 이에 따른 잠재적인 충돌이 발생할 수 있음
- 특히 파이썬은 여러 버전을 동시에 설치할 수 없음

### 제너릭 오퍼레이터 지향하기
- 일부에서는 Airflow 태스크를 실행하기 위해 제너릭 오퍼레이터를 사용하는 것이 낫다고 주장함
- 이 접근 방식의 장점은 한 종류의 오퍼레이터에만 익숙해지면 된다는 것
- 동일한 오퍼레이터를 사용하면 그만큼 익숙해져 버그가 발생할 가능성이 적어짐. 또한 필요한 하나의 종속성 집합만 관리하면 됨

## 컨테이너와 Airflow
